Calendar=function(b,a,c,d){this.timeout=this.getDateStatus=this.currentDateEl=this.activeDiv=null;this.onSelected=c||null;this.onClose=d||null;this.hidden=this.dragging=!1;this.minYear=1970;this.maxYear=2050;this.dateFormat=Calendar._TT.DEF_DATE_FORMAT;this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT;this.weekNumbers=this.isPopup=!0;this.mondayFirst=b;this.dateStr=a;this.ar_days=null;this.showsTime=!1;this.time24=!0;this.activeYear=this.hilitedYear=this.activeMonth=this.hilitedMonth=this.yearsCombo=
this.monthsCombo=this.firstdayname=this.tbody=this.element=this.table=null;this.dateClicked=!1;if("undefined"==typeof Calendar._SDN){"undefined"==typeof Calendar._SDN_len&&(Calendar._SDN_len=3);b=[];for(a=8;0<a;)b[--a]=Calendar._DN[a].substr(0,Calendar._SDN_len);Calendar._SDN=b;"undefined"==typeof Calendar._SMN_len&&(Calendar._SMN_len=3);b=[];for(a=12;0<a;)b[--a]=Calendar._MN[a].substr(0,Calendar._SMN_len);Calendar._SMN=b}};Calendar._C=null;Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent);
Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);Calendar.getAbsolutePos=function(b){var a=0,c=0,d=/^div$/i.test(b.tagName);d&&b.scrollLeft&&(a=b.scrollLeft);d&&b.scrollTop&&(c=b.scrollTop);a={x:b.offsetLeft-a,y:b.offsetTop-c};b.offsetParent&&(b=Calendar.getAbsolutePos(b.offsetParent),a.x+=b.x,a.y+=b.y);return a};
Calendar.isRelated=function(b,a){var c=a.relatedTarget;if(!c){var d=a.type;"mouseover"==d?c=a.fromElement:"mouseout"==d&&(c=a.toElement)}for(;c;){if(c==b)return!0;c=c.parentNode}return!1};Calendar.removeClass=function(b,a){if(b&&b.className){for(var c=b.className.split(" "),d=[],e=c.length;0<e;)c[--e]!=a&&(d[d.length]=c[e]);b.className=d.join(" ")}};Calendar.addClass=function(b,a){Calendar.removeClass(b,a);b.className+=" "+a};
Calendar.getElement=function(b){return Calendar.is_ie?window.event.srcElement:b.currentTarget};Calendar.getTargetElement=function(b){return Calendar.is_ie?window.event.srcElement:b.explicitOriginalTarget?b.explicitOriginalTarget:b.target};Calendar.stopEvent=function(b){b||(b=window.event);Calendar.is_ie?(b.cancelBubble=!0,b.returnValue=!1):(b.preventDefault(),b.stopPropagation());return!1};
Calendar.addEvent=function(b,a,c){b.attachEvent?b.attachEvent("on"+a,c):b.addEventListener?b.addEventListener(a,c,!0):b["on"+a]=c};Calendar.removeEvent=function(b,a,c){b.detachEvent?b.detachEvent("on"+a,c):b.removeEventListener?b.removeEventListener(a,c,!0):b["on"+a]=null};Calendar.createElement=function(b,a){var c=null,c=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",b):document.createElement(b);"undefined"!=typeof a&&a.appendChild(c);return c};
Calendar._add_evs=function(b){with(Calendar)addEvent(b,"mouseover",dayMouseOver),addEvent(b,"mousedown",dayMouseDown),addEvent(b,"mouseout",dayMouseOut),is_ie&&(addEvent(b,"dblclick",dayMouseDblClick),b.setAttribute("unselectable",!0))};Calendar.findMonth=function(b){return"undefined"!=typeof b.month?b:"undefined"!=typeof b.parentNode.month?b.parentNode:null};Calendar.findYear=function(b){return"undefined"!=typeof b.year?b:"undefined"!=typeof b.parentNode.year?b.parentNode:null};
Calendar.showMonthsCombo=function(){var b=Calendar._C;if(!b)return!1;var a=b.activeDiv,c=b.monthsCombo;b.hilitedMonth&&Calendar.removeClass(b.hilitedMonth,"hilite");b.activeMonth&&Calendar.removeClass(b.activeMonth,"active");var d=b.monthsCombo.getElementsByTagName("div")[b.date.getMonth()];Calendar.addClass(d,"active");b.activeMonth=d;b=c.style;b.display="block";b.left=0>a.navtype?a.offsetLeft+"px":a.offsetLeft+a.offsetWidth-c.offsetWidth+"px";b.top=a.offsetTop+a.offsetHeight+"px"};
Calendar.showYearsCombo=function(b){var a=Calendar._C;if(!a)return!1;var c=a.activeDiv,d=a.yearsCombo;a.hilitedYear&&Calendar.removeClass(a.hilitedYear,"hilite");a.activeYear&&Calendar.removeClass(a.activeYear,"active");a.activeYear=null;for(var e=a.date.getFullYear()+(b?1:-1),g=d.firstChild,f=!1,h=12;0<h;--h)e>=a.minYear&&e<=a.maxYear?(g.firstChild.data=e,g.year=e,g.style.display="block",f=!0):g.style.display="none",g=g.nextSibling,e+=b?2:-2;f&&(b=d.style,b.display="block",b.left=0>c.navtype?c.offsetLeft+
"px":c.offsetLeft+c.offsetWidth-d.offsetWidth+"px",b.top=c.offsetTop+c.offsetHeight+"px")};
Calendar.tableMouseUp=function(b){var a=Calendar._C;if(!a)return!1;a.timeout&&clearTimeout(a.timeout);var c=a.activeDiv;if(!c)return!1;var d=Calendar.getTargetElement(b);b||(b=window.event);Calendar.removeClass(c,"active");(d==c||d.parentNode==c)&&Calendar.cellClick(c,b);var e=Calendar.findMonth(d);if(e)c=new Date(a.date),e.month!=c.getMonth()&&(c.setMonth(e.month),a.setDate(c),a.dateClicked=!1,a.callHandler());else if(d=Calendar.findYear(d))c=new Date(a.date),d.year!=c.getFullYear()&&(c.setFullYear(d.year),
a.setDate(c),a.dateClicked=!1,a.callHandler());with(Calendar)return removeEvent(document,"mouseup",tableMouseUp),removeEvent(document,"mouseover",tableMouseOver),removeEvent(document,"mousemove",tableMouseOver),a._hideCombos(),_C=null,stopEvent(b)};
Calendar.tableMouseOver=function(b){var a=Calendar._C;if(a){var c=a.activeDiv,d=Calendar.getTargetElement(b);d==c||d.parentNode==c?(Calendar.addClass(c,"hilite active"),Calendar.addClass(c.parentNode,"rowhilite")):(("undefined"==typeof c.navtype||50!=c.navtype&&(0==c.navtype||2<Math.abs(c.navtype)))&&Calendar.removeClass(c,"active"),Calendar.removeClass(c,"hilite"),Calendar.removeClass(c.parentNode,"rowhilite"));b||(b=window.event);if(50==c.navtype&&d!=c){var e=Calendar.getAbsolutePos(c),g=c.offsetWidth,
f=b.clientX,h=!0;f>e.x+g?(f=f-e.x-g,h=!1):f=e.x-f;0>f&&(f=0);for(var e=c._range,g=c._current,f=Math.floor(f/10)%e.length,i=e.length;0<=--i&&e[i]!=g;);for(;0<f--;)h?--i in e||(i=e.length-1):++i in e||(i=0);c.firstChild.data=e[i];a.onUpdateTime()}(c=Calendar.findMonth(d))?c.month!=a.date.getMonth()?(a.hilitedMonth&&Calendar.removeClass(a.hilitedMonth,"hilite"),Calendar.addClass(c,"hilite"),a.hilitedMonth=c):a.hilitedMonth&&Calendar.removeClass(a.hilitedMonth,"hilite"):(a.hilitedMonth&&Calendar.removeClass(a.hilitedMonth,
"hilite"),(d=Calendar.findYear(d))?d.year!=a.date.getFullYear()?(a.hilitedYear&&Calendar.removeClass(a.hilitedYear,"hilite"),Calendar.addClass(d,"hilite"),a.hilitedYear=d):a.hilitedYear&&Calendar.removeClass(a.hilitedYear,"hilite"):a.hilitedYear&&Calendar.removeClass(a.hilitedYear,"hilite"));return Calendar.stopEvent(b)}};Calendar.tableMouseDown=function(b){if(Calendar.getTargetElement(b)==Calendar.getElement(b))return Calendar.stopEvent(b)};
Calendar.calDragIt=function(b){var a=Calendar._C;if(!a||!a.dragging)return!1;var c,d;Calendar.is_ie?(d=window.event.clientY+document.body.scrollTop,c=window.event.clientX+document.body.scrollLeft):(c=b.pageX,d=b.pageY);a.hideShowCovered();var e=a.element.style;e.left=c-a.xOffs+"px";e.top=d-a.yOffs+"px";return Calendar.stopEvent(b)};
Calendar.calDragEnd=function(b){var a=Calendar._C;if(!a)return!1;a.dragging=!1;with(Calendar)removeEvent(document,"mousemove",calDragIt),removeEvent(document,"mouseover",stopEvent),removeEvent(document,"mouseup",calDragEnd),tableMouseUp(b);a.hideShowCovered()};
Calendar.dayMouseDown=function(b){var a=Calendar.getElement(b);if(a.disabled)return!1;var c=a.calendar;try{if("function"==typeof c.params.inputField.onfocus)c.params.inputField.onfocus()}catch(d){gx.dbg.logEx(d,"calendar.js","Calendar.dayMouseDown")}c.activeDiv=a;Calendar._C=c;if(300!=a.navtype)with(Calendar)50==a.navtype&&(a._current=a.firstChild.data),addClass(a,"hilite active"),addEvent(document,"mouseover",tableMouseOver),addEvent(document,"mousemove",tableMouseOver),addEvent(document,"mouseup",
tableMouseUp);else c.isPopup&&c._dragStart(b);-1==a.navtype||1==a.navtype?(c.timeout&&clearTimeout(c.timeout),c.timeout=setTimeout("Calendar.showMonthsCombo()",250)):-2==a.navtype||2==a.navtype?(c.timeout&&clearTimeout(c.timeout),c.timeout=setTimeout(0<a.navtype?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):c.timeout=null;return Calendar.stopEvent(b)};Calendar.dayMouseDblClick=function(b){Calendar.cellClick(Calendar.getElement(b),b||window.event);Calendar.is_ie&&document.selection.empty()};
Calendar.dayMouseOver=function(b){var a=Calendar.getElement(b);if(Calendar.isRelated(a,b)||Calendar._C||a.disabled)return!1;if(a.ttip){if("_"==a.ttip.substr(0,1)){var c=null;with(a.calendar.date)c=new Date(getFullYear(),getMonth(),a.caldate,12,0,0,0);a.ttip=c.print(a.calendar.ttDateFormat)+a.ttip.substr(1)}a.calendar.tooltips.firstChild.data=a.ttip}300!=a.navtype&&(Calendar.addClass(a,"hilite"),a.caldate&&Calendar.addClass(a.parentNode,"rowhilite"));return Calendar.stopEvent(b)};
Calendar.dayMouseOut=function(b){with(Calendar){var a=getElement(b);if(isRelated(a,b)||_C||a.disabled)return!1;removeClass(a,"hilite");a.caldate&&removeClass(a.parentNode,"rowhilite");a.calendar.tooltips.firstChild.data=_TT.SEL_DATE;return stopEvent(b)}};
Calendar.cellClick=function(b,a){var c=b.calendar,d=!1,e=!1,g=null;if("undefined"==typeof b.navtype)Calendar.removeClass(c.currentDateEl,"selected"),Calendar.addClass(b,"selected"),(d=c.currentDateEl==b)||(c.currentDateEl=b),c.date.setDate(b.caldate),!c.showsTime&&c.date.getDate()!=b.caldate&&(c.date.setHours(12),c.date.setDate(b.caldate)),g=c.date,e=!0,c.dateClicked=!0;else{if(200==b.navtype){Calendar.removeClass(b,"hilite");c.callCloseHandler();return}g=0==b.navtype?new Date:new Date(c.date);c.dateClicked=
!1;var f=g.getFullYear(),h=g.getMonth(),i=function(b){var a=g.getDate(),c=g.getMonthDays(b);a>c&&g.setDate(c);g.setMonth(b)};switch(b.navtype){case 400:Calendar.removeClass(b,"hilite");d=Calendar._TT.ABOUT;d="undefined"!=typeof d?d+(c.showsTime?Calendar._TT.ABOUT_TIME:""):'Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mishoo@infoiasi.ro> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n';
alert(d);return;case -2:f>c.minYear&&g.setFullYear(f-1);break;case -1:0<h?i(h-1):f-- >c.minYear&&(g.setFullYear(f),i(11));break;case 1:11>h?i(h+1):f<c.maxYear&&(g.setFullYear(f+1),i(0));break;case 2:f<c.maxYear&&g.setFullYear(f+1);break;case 100:c.setMondayFirst(!c.mondayFirst);return;case 50:d=b._range;e=b.firstChild.data;for(f=d.length;0<=--f&&d[f]!=e;);a&&a.shiftKey?--f in d||(f=d.length-1):++f in d||(f=0);b.firstChild.data=d[f];c.onUpdateTime();return;case 0:if("function"==typeof c.getDateStatus&&
c.getDateStatus(g,g.getFullYear(),g.getMonth(),g.getDate()))return!1}g.equalsTo(c.date)||(c.setDate(g),e=!0)}e&&c.callHandler();d&&(Calendar.removeClass(b,"hilite"),c.callCloseHandler())};
Calendar.prototype.create=function(b){var a=null;b?(a=b,this.isPopup=!1):(a=document.getElementsByTagName("body")[0],this.isPopup=!0);this.date=this.dateStr?new Date(this.dateStr):new Date;this.table=b=Calendar.createElement("table");b.cellSpacing=0;b.cellPadding=0;b.calendar=this;Calendar.addEvent(b,"mousedown",Calendar.tableMouseDown);var c=Calendar.createElement("div");this.element=c;c.className="calendar";this.isPopup&&(c.style.position="absolute",c.style.display="none");c.appendChild(b);var d=
Calendar.createElement("thead",b),e=null,g=null,f=this,c=function(b,a,c){e=Calendar.createElement("td",g);e.colSpan=a;e.className="calendarbutton";0!=c&&2>=Math.abs(c)&&(e.className+=" nav");Calendar._add_evs(e);e.calendar=f;e.navtype=c;"&"!=b.substr(0,1)?e.appendChild(document.createTextNode(b)):e.innerHTML=b;return e},g=Calendar.createElement("tr",d),h=6;this.isPopup&&--h;this.weekNumbers&&++h;c("?",1,400).ttip=Calendar._TT.INFO;this.title=c("",h,300);this.title.className="calendartitle";this.isPopup&&
(this.title.ttip=Calendar._TT.DRAG_TO_MOVE,this.title.style.cursor="move",c("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE);g=Calendar.createElement("tr",d);g.className="headrow";this._nav_py=c("&#x00ab;",1,-2);this._nav_py.ttip=Calendar._TT.PREV_YEAR;this._nav_pm=c("&#x2039;",1,-1);this._nav_pm.ttip=Calendar._TT.PREV_MONTH;this._nav_now=c(Calendar._TT.TODAY,this.weekNumbers?4:3,0);this._nav_now.ttip=Calendar._TT.GO_TODAY;this._nav_nm=c("&#x203a;",1,1);this._nav_nm.ttip=Calendar._TT.NEXT_MONTH;this._nav_ny=
c("&#x00bb;",1,2);this._nav_ny.ttip=Calendar._TT.NEXT_YEAR;g=Calendar.createElement("tr",d);g.className="daynames";this.weekNumbers&&(e=Calendar.createElement("td",g),e.className="name wn",e.appendChild(document.createTextNode(Calendar._TT.WK)));for(d=7;0<d;--d)e=Calendar.createElement("td",g),e.appendChild(document.createTextNode("")),d||(e.navtype=100,e.calendar=this,Calendar._add_evs(e));this.firstdayname=this.weekNumbers?g.firstChild.nextSibling:g.firstChild;this._displayWeekdays();this.tbody=
h=Calendar.createElement("tbody",b);for(d=6;0<d;--d){g=Calendar.createElement("tr",h);this.weekNumbers&&(e=Calendar.createElement("td",g),e.appendChild(document.createTextNode("")));for(var i=7;0<i;--i)e=Calendar.createElement("td",g),e.appendChild(document.createTextNode("")),e.calendar=this,Calendar._add_evs(e)}this.showsTime?(g=Calendar.createElement("tr",h),g.className="time",e=Calendar.createElement("td",g),e.className="time",e.colSpan=2,e.innerHTML="&nbsp;",e=Calendar.createElement("td",g),
e.className="time",e.colSpan=this.weekNumbers?4:3,function(){function b(a,c,d,g){var h=Calendar.createElement("span",e);h.className=a;h.appendChild(document.createTextNode(c));h.calendar=f;h.ttip=Calendar._TT.TIME_PART;h.navtype=50;h._range=[];if("number"!=typeof d)h._range=d;else for(a=d;a<=g;++a)h._range[h._range.length]=10>a&&10<=g?"0"+a:""+a;Calendar._add_evs(h);return h}var a=f.date.getHours(),c=f.date.getMinutes(),d=!f.time24,h=12<a;d&&h&&(a-=12);var i=b("hour",a,d?1:0,d?12:23),a=Calendar.createElement("span",
e);a.appendChild(document.createTextNode(":"));a.className="colon";var p=b("minute",c,0,59),k=null;e=Calendar.createElement("td",g);e.className="time";e.colSpan=2;d?k=b("ampm",h?"pm":"am",["am","pm"]):e.innerHTML="&nbsp;";f.onSetTime=function(){var a=this.date.getHours(),b=this.date.getMinutes(),c=12<a;c&&d&&(a-=12);i.firstChild.data=10>a?"0"+a:a;p.firstChild.data=10>b?"0"+b:b;d&&(k.firstChild.data=c?"pm":"am")};f.onUpdateTime=function(){var a=this.date,b=parseInt(i.firstChild.data,10);d&&(/pm/i.test(k.firstChild.data)&&
12>b?b+=12:/am/i.test(k.firstChild.data)&&12==b&&(b=0));var c=a.getDate(),e=a.getMonth(),f=a.getFullYear();a.setHours(b);a.setMinutes(parseInt(p.firstChild.data,10));a.setFullYear(f);a.setMonth(e);a.setDate(c);this.dateClicked=!1;this.callHandler()}}()):this.onSetTime=this.onUpdateTime=function(){};b=Calendar.createElement("tfoot",b);g=Calendar.createElement("tr",b);g.className="footrow";e=c(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300);e.className="ttip";this.isPopup&&(e.ttip=Calendar._TT.DRAG_TO_MOVE,
e.style.cursor="move");this.tooltips=e;this.monthsCombo=c=Calendar.createElement("div",this.element);c.className="calendarcombo";for(d=0;d<Calendar._MN.length;++d)b=Calendar.createElement("div"),b.className=Calendar.is_ie?"label-IEfix":"label",b.month=d,b.appendChild(document.createTextNode(Calendar._SMN[d])),c.appendChild(b);this.yearsCombo=c=Calendar.createElement("div",this.element);c.className="calendarcombo";for(d=12;0<d;--d)b=Calendar.createElement("div"),b.className=Calendar.is_ie?"label-IEfix":
"label",b.appendChild(document.createTextNode("")),c.appendChild(b);this._init(this.mondayFirst,this.date);a.appendChild(this.element)};
Calendar._keyEvent=function(b){if(!window.calendar)return!1;Calendar.is_ie&&(b=window.event);var a=window.calendar,c=Calendar.is_ie||"keypress"==b.type;if(b.ctrlKey)switch(b.keyCode){case 37:c&&Calendar.cellClick(a._nav_pm);break;case 38:c&&Calendar.cellClick(a._nav_py);break;case 39:c&&Calendar.cellClick(a._nav_nm);break;case 40:c&&Calendar.cellClick(a._nav_ny);break;default:return!1}else switch(b.keyCode){case 32:Calendar.cellClick(a._nav_now);break;case 27:c&&a.hide();break;case 37:case 38:case 39:case 40:if(c){var c=
a.date.getDate()-1,d=a.currentDateEl,e=null,g=37==b.keyCode||38==b.keyCode;switch(b.keyCode){case 37:0<=--c&&(e=a.ar_days[c]);break;case 38:c-=7;0<=c&&(e=a.ar_days[c]);break;case 39:++c<a.ar_days.length&&(e=a.ar_days[c]);break;case 40:c+=7,c<a.ar_days.length&&(e=a.ar_days[c])}e||(g?Calendar.cellClick(a._nav_pm):Calendar.cellClick(a._nav_nm),c=g?a.date.getMonthDays():1,d=a.currentDateEl,e=a.ar_days[c-1]);Calendar.removeClass(d,"selected");Calendar.addClass(e,"selected");a.date.setDate(e.caldate);a.callHandler();
a.currentDateEl=e}break;case 13:c&&(a.callHandler(),a.hide());break;default:return!1}return Calendar.stopEvent(b)};
Calendar.prototype._init=function(b,a){var c=new Date,d=a.getFullYear();d<this.minYear?(d=this.minYear,a.setFullYear(d)):d>this.maxYear&&(d=this.maxYear,a.setFullYear(d));this.mondayFirst=b;this.date=new Date(a);var e=a.getMonth(),g=a.getDate(),f=a.getMonthDays();a.setDate(1);var h=a.getDay(),i=b?5:6,l=b?6:0;b&&(h=0<h?h-1:6);for(var j=1,m=this.tbody.firstChild,n=c.getFullYear()==d&&c.getMonth()==e,c=c.getDate(),o=a.getWeekNumber(),q=[],p=0;6>p;++p){if(j>f)m.className="emptyrow";else{var k=m.firstChild;
this.weekNumbers&&(k.className="day wn",k.firstChild.data=o,k=k.nextSibling);++o;m.className="daysrow";for(var r=0;7>r;++r){k.className="day";if(!p&&r<h||j>f){try{k.innerHTML="&nbsp;"}catch(t){}k.disabled=!0}else{k.disabled=!1;k.firstChild.data=j;if("function"==typeof this.getDateStatus){a.setDate(j);var s=this.getDateStatus(a,d,e,j);!0===s?(k.className+=" disabled",k.disabled=!0):(/disabled/i.test(s)&&(k.disabled=!0),k.className+=" "+s)}if(!k.disabled&&(q[q.length]=k,k.caldate=j,k.ttip="_",j==g&&
(k.className+=" selected",this.currentDateEl=k),n&&j==c&&(k.className+=" today",k.ttip+=Calendar._TT.PART_TODAY),h==i||h==l))k.className+=" weekend";++j;++h^7||(h=0)}k=k.nextSibling}}m=m.nextSibling}this.ar_days=q;this.title.firstChild.data=Calendar._MN[e]+", "+d;this.onSetTime()};Calendar.prototype.setDate=function(b){b.equalsTo(this.date)||this._init(this.mondayFirst,b)};Calendar.prototype.refresh=function(){this._init(this.mondayFirst,this.date)};
Calendar.prototype.setMondayFirst=function(b){this._init(b,this.date);this._displayWeekdays()};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(b){this.getDateStatus=b};Calendar.prototype.setRange=function(b,a){this.minYear=b;this.maxYear=a};Calendar.prototype.callHandler=function(){this.onSelected&&(this.onSelected(this,this.date.print(this.dateFormat),this.params.inputField),gx.fn.setFocus(this.params.inputField))};
Calendar.prototype.callCloseHandler=function(){if(this.onClose)this.onClose(this);this.hideShowCovered()};Calendar.prototype.destroy=function(){this.element.parentNode.removeChild(this.element);Calendar._C=null;window.calendar=null};Calendar.prototype.reparent=function(b){var a=this.element;a.parentNode.removeChild(a);b.appendChild(a)};
Calendar._checkCalendar=function(b){if(!window.calendar)return!1;if(!0==Calendar.is_ie){if(gx.evt.mouse.update(b),!gx.fx.isUnderMouse(calendar.element))return window.calendar.callCloseHandler(),Calendar.stopEvent(b)}else{for(var a=Calendar.getTargetElement(b);null!=a&&a!=calendar.element;a=a.parentNode);if(null==a)return window.calendar.callCloseHandler(),Calendar.stopEvent(b)}};
Calendar.prototype.show=function(){if(!0==this.params.inputField.disabled)return!1;for(var b=this.table.getElementsByTagName("tr"),a=b.length;0<a;){var c=b[--a];Calendar.removeClass(c,"rowhilite");for(var c=c.getElementsByTagName("td"),d=c.length;0<d;){var e=c[--d];Calendar.removeClass(e,"hilite");Calendar.removeClass(e,"active")}}this.element.style.display="block";this.hidden=!1;this.isPopup&&(window.calendar=this,Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,
"keypress",Calendar._keyEvent),Calendar.addEvent(document,"mousedown",Calendar._checkCalendar));this.hideShowCovered()};Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"keypress",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar));this.element.style.display="none";this.hidden=!0;this.hideShowCovered()};
Calendar.prototype.showAt=function(b,a){var c=this.element.style;c.left=b+"px";c.top=a+"px";this.show()};
Calendar.prototype.showAtElement=function(b,a){var c=this,d=Calendar.getAbsolutePos(b);if(!a||"string"!=typeof a)return this.showAt(d.x,d.y+b.offsetHeight),!0;this.element.style.display="block";Calendar.continuation_for_the_fucking_khtml_browser=function(){var e=c.element.offsetWidth,g=c.element.offsetHeight;c.element.style.display="none";var f=a.substr(0,1),h="l";1<a.length&&(h=a.substr(1,1));switch(f){case "T":d.y-=g;break;case "B":d.y+=b.offsetHeight;break;case "C":d.y+=(b.offsetHeight-g)/2;break;
case "t":d.y+=b.offsetHeight-g}switch(h){case "L":d.x-=e;break;case "R":d.x+=b.offsetWidth;break;case "C":d.x+=(b.offsetWidth-e)/2;break;case "r":d.x+=b.offsetWidth-e}c.showAt(d.x,d.y)};Calendar.is_khtml?setTimeout("Calendar.continuation_for_the_fucking_khtml_browser()",10):Calendar.continuation_for_the_fucking_khtml_browser()};Calendar.prototype.setDateFormat=function(b){this.dateFormat=b};Calendar.prototype.setTtDateFormat=function(b){this.ttDateFormat=b};
Calendar.prototype.parseDate=function(b,a){if(-1==b.indexOf("/  /  ")){var c=0,d=-1,e=0,g=b.split(/\W+/);a||(a=this.dateFormat);var f=[];a.replace(/(%.)/g,function(a,b){return f[f.length]=b});for(var h=0,i=0,l=0,j=0,h=0;h<g.length;++h)if(!("%a"==f[h]||"%A"==f[h])){if("%d"==f[h]||"%e"==f[h])e=parseInt(g[h],10);"%m"==f[h]&&(d=parseInt(g[h],10)-1);if("%Y"==f[h]||"%y"==f[h])c=parseInt(g[h],10),100>c&&(c+=29<c?1900:2E3);if("%b"==f[h]||"%B"==f[h])for(i=0;12>i;++i){if(Calendar._MN[i].substr(0,g[h].length).toLowerCase()==
g[h].toLowerCase()){d=i;break}}else/%[HIkl]/.test(f[h])?l=parseInt(g[h],10):/%[pP]/.test(f[h])?/pm/i.test(g[h])&&12>l&&(l+=12):"%M"==f[h]&&(j=parseInt(g[h],10))}if(0!=c&&-1!=d&&0!=e)this.setDate(new Date(c,d,e,l,j,0));else{c=0;d=-1;for(h=e=0;h<g.length;++h)if(-1!=g[h].search(/[a-zA-Z]+/)){for(var m=-1,i=0;12>i;++i)if(Calendar._MN[i].substr(0,g[h].length).toLowerCase()==g[h].toLowerCase()){m=i;break}-1!=m&&(-1!=d&&(e=d+1),d=m)}else 12>=parseInt(g[h],10)&&-1==d?d=g[h]-1:31<parseInt(g[h],10)&&0==c?(c=
parseInt(g[h],10),100>c&&(c+=29<c?1900:2E3)):0==e&&(e=g[h]);0==c&&(c=(new Date).getFullYear());-1!=d&&0!=e&&this.setDate(new Date(c,d,e,l,j,0))}}};
Calendar.prototype.hideShowCovered=function(){var b=this;Calendar.continuation_for_the_fucking_khtml_browser=function(){function a(a){var b=a.style.visibility;b||(b=document.defaultView&&"function"==typeof document.defaultView.getComputedStyle?Calendar.is_khtml?"":document.defaultView.getComputedStyle(a,"").getPropertyValue("visibility"):a.currentStyle?a.currentStyle.visibility:"");return b}for(var c=["object","applet","iframe","select"],d=b.element,e=Calendar.getAbsolutePos(d),g=e.x,f=d.offsetWidth+
g,h=e.y,d=d.offsetHeight+h,i=c.length;0<i;)for(var l=document.getElementsByTagName(c[--i]),j=null,m=l.length;0<m;){var j=l[--m],e=Calendar.getAbsolutePos(j),n=e.x,o=j.offsetWidth+n,e=e.y,q=j.offsetHeight+e;b.hidden||n>f||o<g||e>d||q<h?(!j.__msh_save_visibility&&""!=j.__msh_save_visibility&&(j.__msh_save_visibility=a(j)),j.style.visibility="undefined"!=typeof j.__msh_save_visibility?j.__msh_save_visibility:""):(j.__msh_save_visibility||(j.__msh_save_visibility=a(j)),j.style.visibility="hidden")}};
Calendar.is_khtml?setTimeout("Calendar.continuation_for_the_fucking_khtml_browser()",10):Calendar.continuation_for_the_fucking_khtml_browser()};
Calendar.prototype._displayWeekdays=function(){for(var b=this.mondayFirst?0:1,a=this.mondayFirst?6:0,c=this.mondayFirst?5:6,d=this.firstdayname,e=0;7>e;++e)d.className="day name",e||(d.ttip=this.mondayFirst?Calendar._TT.SUN_FIRST:Calendar._TT.MON_FIRST,d.navtype=100,d.calendar=this,Calendar._add_evs(d)),(e==a||e==c)&&Calendar.addClass(d,"weekend"),d.firstChild.data=Calendar._SDN[e+1-b],d=d.nextSibling};
Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none"};
Calendar.prototype._dragStart=function(b){if(!this.dragging){this.dragging=!0;var a;Calendar.is_ie?(a=window.event.clientY+document.body.scrollTop,b=window.event.clientX+document.body.scrollLeft):(a=b.clientY+window.scrollY,b=b.clientX+window.scrollX);var c=this.element.style;this.xOffs=b-parseInt(c.left);this.yOffs=a-parseInt(c.top);with(Calendar)addEvent(document,"mousemove",calDragIt),addEvent(document,"mouseover",stopEvent),addEvent(document,"mouseup",calDragEnd)}};
Date._MD=[31,28,31,30,31,30,31,31,30,31,30,31];Calendar.SECOND=1E3;Calendar.MINUTE=60*Calendar.SECOND;Calendar.HOUR=60*Calendar.MINUTE;Calendar.DAY=24*Calendar.HOUR;Calendar.WEEK=7*Calendar.DAY;Date.prototype.getMonthDays=function(b){var a=this.getFullYear();"undefined"==typeof b&&(b=this.getMonth());return 0==a%4&&(0!=a%100||0==a%400)&&1==b?29:Date._MD[b]};
Date.prototype.getDayOfYear=function(){var b=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),a=new Date(this.getFullYear(),0,1,0,0,0);return Math.floor((b-a)/Calendar.DAY)};Date.prototype.getWeekNumber=function(){var b=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0),a=new Date(this.getFullYear(),0,1,0,0,0),b=b-a,a=a.getDay();0==a&&(a=7);4<a&&(a-=4)||(a+=3);return Math.round((b/Calendar.DAY+a)/7)};
Date.prototype.equalsTo=function(b){return this.getFullYear()==b.getFullYear()&&this.getMonth()==b.getMonth()&&this.getDate()==b.getDate()&&this.getHours()==b.getHours()&&this.getMinutes()==b.getMinutes()};
Date.prototype.print=function(b){var a=this.getMonth(),c=this.getDate(),d=this.getFullYear(),e=this.getWeekNumber(),g=this.getDay(),f={},h=this.getHours(),i=12<=h,l=i?h-12:h,j=this.getDayOfYear();0==l&&(l=12);var m=this.getMinutes(),n=this.getSeconds();f["%a"]=Calendar._SDN[g];f["%A"]=Calendar._DN[g];f["%b"]=Calendar._SMN[a];f["%B"]=Calendar._MN[a];f["%C"]=1+Math.floor(d/100);f["%d"]=10>c?"0"+c:c;f["%e"]=c;f["%H"]=10>h?"0"+h:h;f["%I"]=10>l?"0"+l:l;f["%j"]=100>j?10>j?"00"+j:"0"+j:j;f["%k"]=h;f["%l"]=
l;f["%m"]=9>a?"0"+(1+a):1+a;f["%M"]=10>m?"0"+m:m;f["%n"]="\n";f["%p"]=i?"PM":"AM";f["%P"]=i?"pm":"am";f["%s"]=Math.floor(this.getTime()/1E3);f["%S"]=10>n?"0"+n:n;f["%t"]="\t";f["%U"]=f["%W"]=f["%V"]=10>e?"0"+e:e;f["%u"]=g+1;f["%w"]=g;f["%y"]=(""+d).substr(2,2);f["%Y"]=d;f["%%"]="%";a=Date._msh_formatRegexp;if("undefined"==typeof a){var a="",o;for(o in f)a+=a?"|"+o:o;Date._msh_formatRegexp=a=RegExp("("+a+")","g")}return b.replace(a,function(a,b){return f[b]})};window.calendar=null;
