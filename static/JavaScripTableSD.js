gx.grid.impl=function(q){var t=/style="([^"]*)"/ig;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.align=this.width="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.usePaging=this.ascSort=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName="";this.gxGridObject=
null;this.gxBuffer=new gx.text.stringBuffer;this.evenRowCellClass=this.evenRowClass=this.oddRowCellClass=this.oddRowClass=this.columnHeaderTextClass=this.columnHeaderClass=this.highlightedNavigationLinkClass=this.navigationLinkClass=this.navigationClass=this.editControlClass=this.footerClass=this.headerClass=this.tableClass=this.gxParentRowId="";"undefined"!=typeof Image?(this.ascLabel=new Image,this.descLabel=new Image):this.descLabel=this.ascLabel=null;this.id=q;this.container=null;this.setContainerDelayed=
function(a){this.container=a};this.addColumn=function(a){a.isGxRemove()&&(a.visible=!1);var b=this.columns.length;a.index=b;a.table=this;this.columns[b]=a;"undefined"!=typeof a.htmlName&&(this.columnsHtmlName[a.htmlName]=a);"undefined"!=typeof a.gxId&&(this.columnsGxId[a.gxId]=a);"undefined"!=typeof a.gxAttId&&(this.columnsGxAttId[a.gxAttId]=a);return a};this.getColumnByIndex=function(a){return this.columns[a]};this.addRow=function(a,b){a.table=this;if(null!=a)return this.rows[this.rows.length]=a,
"undefined"!=typeof a.id&&(this.rowsById[a.id]=a),"undefined"!=typeof a.gxId&&(this.rowsByGxId[a.gxId]=a),gx.lang.booleanValue(b)&&this.render(),a};this.getColumnByHtmlName=function(a){var b,d;b=this.columnsHtmlName[a];"undefined"==typeof b&&"undefined"!=typeof this.gxCmpContext&&this.gxCmpContext.length<a.length&&(d=a.substring(0,this.gxCmpContext.length),d==this.gxCmpContext&&(a=a.substring(this.gxCmpContext.length,a.length),b=this.columnsHtmlName[a]));return b};this.getColumnByGxId=function(a){return this.columnsGxId[a]};
this.getColumnByGxAttId=function(a){return this.columnsGxAttId[a]};this.getColumnForVar=function(a){for(var b=0;b<this.columns.length;b++){var d=this.parentGxObject.getValidStruct(this.columns[b].gxId);if(d&&d.gxvar==a)return this.columns[b]}return null};this.getRowById=function(a){return this.rowsById[a]};this.getRowByGxId=function(a){return this.rowsByGxId[a]};this.setSort=function(a,b){a==this.sortColumn?this.ascSort=null==b?!this.ascSort:gx.lang.booleanValue(b):(this.sortColumn=a,this.ascSort=
null==b?!0:gx.lang.booleanValue(b));this.doSort();this.ownerGrid.refreshGrid()};this.doSort=function(){-1!=this.sortColumn&&this.rows.sort(this.sort)};this.getControlName=function(a,b){return this.gxCmpContext+b.htmlName+"_"+a.gxId};this.getControlId=function(a,b){return this.getControlName(a,b)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/this.pageSize)};this.isGxTrn=function(){return this.parentGxObject.isTransaction()};this.gridObject=
function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(a){return this.gxCmpContext+"delete"+this.gxGridName+"_"+a};this.showDeleteImage=function(a){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&this.isGxTrn()&&(a=gx.dom.el(this.deleteImgId(a)))&&!gx.fn.isVisible(a))a.style.display="inline","A"==a.parentNode.nodeName&&(a.parentNode.style.display="inline")};this.appendDeleteHeader=function(a,b){if(!this.gxIsFreestyle&&
this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){var d=this.isGxTrn(),g=!1;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(b==gx.grid.deletePositions.left)g=!0;else return;else gx.grid.deletePosition==b&&(g=!0);d&&g&&(d="&nbsp;",this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&(d=gx.grid.deleteTitle),a.append('<th class="'+this.columnHeaderClass+'">'+d+"</th>"))}};this.appendDeleteImage=function(a,b,d){if(this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none&&this.isGxTrn()){var g=
!1,f=!1;"DSP"!=this.parentGxObject.Gx_mode&&"DLT"!=this.parentGxObject.Gx_mode&&(g=b.gxDeleted(),f=b.gxIsMod()||b.gxExists());var k=this.deleteImgId(b.gxId),l=!1;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(d==gx.grid.deletePositions.left)l=!0;else return;else if(!this.gxIsFreestyle&&gx.grid.deletePosition==d)l=!0;else if(this.gxIsFreestyle){var j=gx.grid.deletePositionFree;d==gx.grid.deletePositions.left?l=j==gx.grid.deletePositions.topL||j==gx.grid.deletePositions.bottomL:d==gx.grid.deletePositions.right&&
(l=j==gx.grid.deletePositions.topR||j==gx.grid.deletePositions.bottomR);d=j}l&&(j='<td style="text-align:'+this.deleteImageAlign(d)+";vertical-align:"+this.deleteVerticalAlign(d)+'">',l=!1,g&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images?d=gx.grid.undeleteImage:f&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images?d=gx.grid.deleteImage:g&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu?d=gx.grid.deleteImage:(d=gx.grid.deleteImage,l=!0),g="",a.append(j),this.ownerGrid.deleteMethod==
gx.grid.deleteMethods.images&&(f=gx.fn.firstGridControl(this.ownerGrid.gridId),g=gx.grid.deleteTooltip,a.append('<a gxfocusable="1" href="javascript:'+this.gridObject()+".setRowDeleted('"+b.gxId+"');\""),a.append(' onfocus="gx.evt.onfocus(this,'+f+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+b.gxId+"',"+this.ownerGrid.gridId+')"'),b="",l&&(b+="display:none;"),b&&a.append(' style="'+b+'"'),a.append(">")),a.append('<img id="'+k+'" src="'+d+'"'),g&&a.append(' title="'+
g+'"'),a.append(' style="border-style: none;'),l&&a.append("display:none;"),a.append('"'),a.append("/>"),this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&a.append("</a>"),a.append("</td>"))}};this.deleteVerticalAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";var b="top";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.bottomR)b="bottom";return b}return"middle"};this.deleteImageAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==
gx.grid.deleteMethods.menu)return"left";var b="right";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.topL)b="left";return b}return"center"};this.render=function(a,b,d,g){a&&(a=!0);var f=this.isGxTrn(),k=this.gxIsFreestyle&&1<this.gxGridCols,b=new gx.text.stringBuffer,l=this.columns,j=l.length,c,e;!this.gxIsFreestyle&&f&&j++;var o=[],u,v;0!==Number(this.pageSize)?(c=this.getMaxPage(),0>=this.currentPage?this.currentPage=1:this.currentPage>c&&(this.currentPage=c),u=Math.max(this.pageSize*
(this.currentPage-1),0),v=Math.min(u+this.pageSize,this.rows.length)):(u=0,v=this.rows.length);this.tableClass=this.gxCssClass;this.evenRowClass=this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.columnHeaderTextClass=this.columnHeaderClass=this.headerClass=this.gxTitleClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass;var s="";-1==this.gxHtmlTags.indexOf("class=")&&(s=' class="'+this.gxCssClass+'"');c="";gx.lang.emptyObject(this.gxBackground)||(c+=
";background-image:url('"+gx.util.resourceUrl(this.gxBackground,!0)+"');");gx.lang.emptyObject(this.gxBorderWidth)||(c+=";border: solid "+this.gxBorderWidth+"px ");c=gx.lang.emptyObject(this.gxBordercolor)?c+";":c+(this.gxBordercolor+";");0<this.ownerGrid.width&&(c+="width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";");this.gxAllowCollapsing&&(b.append('<table><tr valign="top"><td>'),b.append('<img class="collapse-icon" style="cursor:pointer;" src="'),this.gxCollapsed?(c="display:none;",b.append(gx.ajax.getImageUrl(gx,
"expandImage"))):b.append(gx.ajax.getImageUrl(gx,"collapseImage")),b.append('" onclick="'+this.gridObject()+'.expandCollapse(this, event);"></td><td width="100%">'));b.append("<table "+s+' id="'+this.gxCmpContext+this.gxGridObject+'Tbl" ');gx.lang.emptyObject(this.gxToolTipText)||b.append('title="'+this.gxToolTipText+'" ');s=t.exec(this.gxHtmlTags);e="";s&&1<s.length&&(e=s[1]);e+=c;b.append('style="');b.append(e);b.append('" '+this.gxHtmlTags.replace(t,"")+">");gx.lang.emptyObject(this.headerText)||
b.append('<tr><td colspan="'+j+'" class="'+this.headerClass+'">'+this.headerText+"</td></tr>");s=l.length;if(!this.gxIsFreestyle){b.append("<thead>");b.append("<tr>");this.appendDeleteHeader(b,gx.grid.deletePositions.left);var n=gx.ajax.getImageUrl(gx,"ascImage"),p=gx.ajax.getImageUrl(gx,"descImage"),r=0,i;for(c=0;c<s;c++){e=l[c];b.append('<th nowrap="nowrap" class="'+this.columnHeaderClass+'"');i="";gx.lang.gxBoolean(e.visible)||(i+="display:none;");e.width&&(e.gxWidthUnit||(e.gxWidthUnit="px"),
i+="width:"+e.width+e.gxWidthUnit+";");e.align&&(i+="text-align:"+e.align+";");if(!gx.lang.emptyObject(this.gxTitleBackColor)&&(this.gxTitleBackstyle==gx.grid.styles.header||this.gxTitleBackstyle==gx.grid.styles.report))i+="background-color:"+this.gxTitleBackColor+";",this.gxRealTitleBackColor=this.gxTitleBackColor;!gx.lang.emptyObject(this.gxBackColor)&&this.gxTitleBackstyle==gx.grid.styles.uniform&&(i+="background-color:"+this.gxBackColor+";",this.gxRealTitleBackColor=this.gxBackColor);gx.lang.emptyObject(this.gxTitleForeColor)||
(i+="color:"+this.gxTitleForeColor+";");gx.lang.emptyObject(this.gxTitleFont)||(i+=this.gxTitleFont);b.append(' style="'+i+';"');b.append(' colindex="'+r+'"');b.append(">");r++;gx.lang.emptyObject(gx.text.trim(e.title))?b.append("&nbsp;"):(b.append("<span"),e.gxTooltip&&b.append(' title="'+e.gxTooltip+'"'),e.sortable&&b.append(' onclick="'+this.gridObject()+".grid.setSort("+e.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\""),
b.append('">'),b.append(e.title),null!=this.ascLabel&&null!=this.descLabel&&(this.ascLabel.src=n,this.descLabel.src=p,e.sortable&&this.sortColumn==e.index&&b.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,o))),b.append("</span>"));b.append("</th>")}this.appendDeleteHeader(b,gx.grid.deletePositions.right);b.append("</tr>");b.append("</thead>")}b.append("<tbody>");o=!0;for(c=u;c<v;c++){n=this.rows[c];a&&c===u&&!gx.fn.currentGridRowImpl(this.gxId)&&gx.fn.setCurrentGridRow(this.gxId,
n.gxId);p=n.gxDeleted();o=!o;i=(o?this.evenRowClass:this.oddRowClass)+(p?" RowDeleted":"");if(this.gxIsFreestyle&&!(this.gxTitleBackstyle==gx.grid.styles.report||this.gxTitleBackstyle==gx.grid.styles.uniform))i=this.tableClass;e=new gx.text.stringBuffer;var q="tr";if(k&&this.gxIsFreestyle&&(0<c&&0===c%this.gxGridCols||0===c&&0<this.gxGridCols))0<c&&b.append("</tr>"),b.append("<tr>");this.gxIsFreestyle&&(q="td");r="";this.gxTitleBackstyle==gx.grid.styles.report&&(r=o?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd);
this.gxTitleBackstyle==gx.grid.styles.header&&(r=this.gxLinesBackcolorOdd);this.gxTitleBackstyle==gx.grid.styles.uniform&&(r=this.gxBackColor);if(!this.gxIsFreestyle||this.gxIsFreestyle&&k)e.append("<"+q+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+n.gxId+"'"),this.gxIsFreestyle&&k?e.append(' gxrow="'+n.gxId.toString()+'"vAlign="'+this.columns[1].gxControl.verticalAlign+'"'):e.append(' gxrow="'+n.gxId.toString()+'"'),this.gxIsFreestyle||e.append(' class="'+i+'"'),n.selected&&e.append(' data-selected="1"'),
i="",r&&(i="background-color:"+r+";"),gx.lang.emptyObject(this.gxLinesFont)||(i+=this.gxLinesFont),i&&e.append(' style="'+i+'" '),e.append(">"),b.append(e.toString());this.gxIsFreestyle&&(k&&(b.append("<table width='100%' cellspacing='0' cellpadding='0'"),b.append("><tbody>")),e=this.gxBuffer.toString(),b.append(e));this.gxIsFreestyle||this.appendDeleteImage(b,n,gx.grid.deletePositions.left);for(i=0;i<s;i++){e=l[i];var q=gx.lang.gxBoolean(e.visible),m=n.gxProps[e.index],x=n.values[e.index],h=e.gxControl;
this.gxIsFreestyle&&h.type==gx.html.controls.types.row&&0===e.index&&(h.isFreestyleRow=!0);h.setGridData({grid:this.ownerGrid,row:n,gridId:this.gxId,gridRow:n.gxId});d?(delete h.formattedValue,h.value=x,h.id=e.htmlName+"_"+h.gridRow):h.setProperties.apply(h,m);p&&(h.rtEnabled=!0,h.enabled=!1);if(a)delete gx.usrPtys[h.id];else if(void 0!==gx.usrPtys[h.id])for(var w in gx.usrPtys[h.id])"enabled"==w&&(h.rtEnabled=!0),h.setIndividualProp(w,gx.usrPtys[h.id][w]);m.Value&&(h.value=m.Value);m.FormattedValue&&
(h.formattedValue=m.FormattedValue);m.Values&&(h.possibleValues=m.Values.v);if(this.gxIsFreestyle&&h.type==gx.html.controls.types.row&&0===e.index&&(h.id=this.gxCmpContext+this.gxGridObject+"Row_"+n.gxId,f&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&(h.oncontextmenu=this.gridObject()+".showContextMenu(this, event);"),r))h.style+="background-color:"+r+";";this.gxIsFreestyle||(b.append('<td valign="'+e.valign+'"'),b.append(' colindex="'+i+'"'),m="",q||(m+="display:none;",h.visible&&!e.isGxRemove()&&
!this.ownerGrid.isPromptColumn(e)&&this.ownerGrid.addColPropertyAfterRender(i,"Visible",1)),e.width?(e.gxWidthUnit||(e.gxWidthUnit="px"),m+="width:"+e.width+e.gxWidthUnit+";"):e.gxColSize&&(h.colSize=e.gxColSize),e.align&&(m+="text-align:"+e.align+";"),h.style&&(m+=h.style),m&&b.append(' style="'+m+'" '),b.append(">"));b.append(h.getHtml());this.gxIsFreestyle&&h.type==gx.html.controls.types.row&&0===e.index&&this.appendDeleteImage(b,n,gx.grid.deletePositions.left);h.persistValue();this.gxIsFreestyle||
b.append("</td>");this.gxIsFreestyle&&(e.index==this.columns.length-1&&this.appendDeleteImage(b,n,gx.grid.deletePositions.right),e=e.buffer.toString(),b.append(e))}this.gxIsFreestyle&&k?k&&b.append("</tbody></table></td>"):this.appendDeleteImage(b,n,gx.grid.deletePositions.right)}this.gxIsFreestyle&&0<this.gxGridCols&&k&&b.append("</tr>");b.append("</tbody>");b.append("<tfoot>");c="";if(f||this.hasPagingButtons())c=this.buildNavigation(j),b.append(c);gx.lang.emptyObject(this.footerText)||b.append('<tr><td colspan="'+
j+'" class="'+this.footerClass+'">'+this.footerText+"</td></tr>");b.append("</tfoot>");b.append("</table>");this.gxAllowCollapsing&&b.append("</td></tr></table>");if(gx.dom.shouldPurge()){d=["onblur","onclick","onfocus","onchange"];f=gx.dom.byTag("input",this.container);c=0;for(a=f.length;c<a;c++)gx.dom.purgeElement(f[c],d);f=gx.dom.byTag("textarea",this.container);c=0;for(a=f.length;c<a;c++)gx.dom.purgeElement(f[c],d);f=gx.dom.byTag("select",this.container);c=0;for(a=f.length;c<a;c++)gx.dom.purgeElement(f[c],
d);f=gx.dom.byTag("span",this.container);c=0;for(a=f.length;c<a;c++)gx.dom.purgeElement(f[c],d);f=gx.dom.byTag("img",this.container);c=0;for(a=f.length;c<a;c++)gx.dom.purgeElement(f[c],d)}a=(c=gx.dom.getActiveElement())&&c.id&&gx.dom.isChildNode(c,this.container);this.container.innerHTML=b.toString();if(a&&(c=gx.dom.el(c.id)))gx.csv.disableFocus=!0,c.focus();this.rendered||this.defineEventHandlers();b.clear();g();this.rendered=!0};this.defineEventHandlers=function(){this.gxAllowHovering&&!this.gxIsFreestyle&&
gx.evt.attach(this.container,"mouseover",this.mouseOverHandler,this);this.gxAllowHovering&&!this.gxIsFreestyle&&gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this);this.isGxTrn()&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,"contextmenu",this.contextMenuHandler,this);gx.evt.attach(this.container,"mousedown",this.mouseDownHandler.closure(this,[this.gxAllowSelection&&!this.gxIsFreestyle],!0),this);this.isGxTrn()&&gx.evt.attach(this.container,
"keydown",this.keyDownHandler,this)};this.isGridRow=function(a){return a&&"TR"==a.tagName&&a.getAttribute("gxrow")&&gx.dom.findParentByTagName(a,"DIV")==this.container};this.getTargetRow=function(a,b){var d=a;for(this.isGridRow(d)||(d=gx.dom.findParentByTagName(a,"TR"));d&&gx.dom.isChildNode(d,this.container);){if(this.isGridRow(d)&&(!b||"body"==b&&"TBODY"==d.parentNode.tagName||"header"==b&&"THEAD"==d.parentNode.tagName))return d;d=gx.dom.findParentByTagName(d,"TR")}};this.mouseOverHandler=function(a){(a=
this.getTargetRow(gx.evt.source(a),"body"))&&"1"!=a.getAttribute("data-selected")&&this.startRowHover(a,parseInt(a.getAttribute("gxrow").substring(0,4),10)-1)};this.mouseOutHandler=function(a){(a=this.getTargetRow(gx.evt.source(a),"body"))&&"1"!=a.getAttribute("data-selected")&&this.endRowHover(a,parseInt(a.getAttribute("gxrow").substring(0,4),10)-1)};this.contextMenuHandler=function(a){var b=this.getTargetRow(gx.evt.source(a),"body");b&&this.ownerGrid.showContextMenu(b,a)};this.mouseDownHandler=
function(a,b){var d=this.getTargetRow(gx.evt.source(a),"body");d&&this.setRowSelected(d,d.getAttribute("gxrow"),!0,b)};this.keyDownHandler=function(a){this.getTargetRow(gx.evt.source(a),"body")&&this.ownerGrid.rowKeyPressed(a)};this.changePage=function(a){var b=this.getMaxPage(),a=parseInt(a,0);0>=a?a=1:a>b&&(a=b);this.currentPage=a;this.render()};this.setRowSelected=function(a,b,d,g){var g=void 0===g||g,f=function(){g&&(void 0===a.gxOriginalBackcolor&&(a.gxOriginalBackcolor=a.style.backgroundColor),
gx.dom.forEachChild(a,this,function(b){void 0===a.gxOriginalBackcolor&&(b.gxOriginalBackcolor=b.style.backgroundColor)}));this.instanciateSelectionVars(b);var d=this.rows.length,f,j=[];for(f=0;f<d;f++){var c=this.rows[f];c.selected=c.gxId==b;c.selected?(g&&(a.gxSBackcolor=void 0!==a.gxOriginalBackcolor?a.gxOriginalBackcolor:a.style.backgroundColor,a.style.backgroundColor=this.gxSelectionColor.Html,gx.dom.addClass(a,this.selectedRowClass)),j.push(c)):g&&(c=gx.dom.el(this.gxCmpContext+this.gxGridObject+
"Row_"+c.gxId),null!=c&&void 0!==c.gxSBackcolor&&(c.style.backgroundColor=c.gxSBackcolor,gx.util.browser.isIE()&&gx.dom.forEachChild(c,this,function(a){null!=a&&void 0!==a.gxSBackcolor&&(a.style.backgroundColor=a.gxSBackcolor)}),gx.dom.removeClass(c,this.selectedRowClass)))}for(f=0;f<j.length;f++)this.instanciateSelectedRow(j[f]),g&&gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxSBackcolor=void 0!==a.gxOriginalBackcolor?a.gxOriginalBackcolor:a.style.backgroundColor;a.style.backgroundColor=
this.gxSelectionColor.Html})};d&&g?setTimeout(f.closure(this),100):f.call(this)};this.instanciateSelectionVars=function(a){gx.setGxO(this.parentGxObject.CmpContext,this.parentGxObject.IsMasterPage);gx.fn.setCurrentGridRow(this.gxId,a);gx.fn.setHidden(this.gxCmpContext+this.gxGridName.toUpperCase()+"_ROW",a.substring(0,4))};this.instanciateSelectedRow=function(a){this.setSelectedRowVars(a);this.gxOnLineActivate&&!this.ownerGrid.isLoading&&this.parentGxObject[this.gxOnLineActivate].call(this.parentGxObject,
a.gxId)};this.setSelectedRowVars=function(a){for(var b=this.parentGxObject,d=this.columns.length,g=0;g<d;g++){var f=this.columns[g],k=b.GXValidFnc[f.gxId];if(null!=k){var l=a.values[g];this.ownerGrid.isUsercontrol&&(l=this.properties[a.id][f.index].value);k.v2v&&k.c2v(l)}}};this.startRowHover=function(a,b){void 0===a.gxOriginalBackcolor&&(a.gxOriginalBackcolor=a.style.backgroundColor);gx.dom.forEachChild(a,this,function(a){void 0===a.gxOriginalBackcolor&&(a.gxOriginalBackcolor=a.style.backgroundColor)});
var d=this.getRowById(b);this.gxAllowHovering&&this.gxHoverColor&&!d.selected&&(a.gxHBackcolor=a.style.backgroundColor,a.style.backgroundColor=this.gxHoverColor.Html,gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html}))};this.endRowHover=function(a,b){var d=this.getRowById(b);this.gxAllowHovering&&!d.selected&&void 0!==a.gxHBackcolor&&(a.style.backgroundColor=a.gxHBackcolor,gx.util.browser.isIE()&&gx.dom.forEachChild(a,
this,function(a){void 0!==a.gxHBackcolor&&(a.style.backgroundColor=a.gxHBackcolor)}))};this.hasPagingButtons=function(){return this.usePaging&&(!this.isFirstPage()||!this.isLastPage())};this.buildNavigation=function(a){function b(a,b,c,d,f){return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+f+'" onblur="this.style.textDecoration = \'none\';"><span '+(void 0!==d?'id="'+d+'"':"")+' style="'+g+'" class="'+l+'" onclick="'+b+'" onMouseOver="this.className=\''+
j+"';window.status='"+c+"';return true;\" onMouseOut=\"this.className='"+l+"';window.status='';return true;\">"+a+"</span></a>"}function d(a,b,d,f){return'<span class="'+a+'"'+(d?' onclick="'+b+'" ':"")+('style="'+c+(d?"":"opacity:.7;cursor:default")+'"')+' title="'+f+'">&nbsp;&nbsp;</span>'}var g="cursor:"+(document.createTextRange?"hand":"pointer")+";",f=new gx.text.stringBuffer,k=this.getRowCount();this.navigationClass=this.gxFooterClass;this.gxIsFreestyle&&1<this.gxGridCols&&(a=this.gxGridCols);
gx.lang.emptyObject(this.gxRealTitleBackColor)?f.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;">'):f.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+this.gxRealTitleBackColor+';">');var l=this.navigationLinkClass,j=this.highlightedNavigationLinkClass,c="padding-left:20px;padding-bottom:5px;";if((0<k||0===k&&!this.isFirstPage())&&this.usePaging)f.append('<div style="padding-bottom:5px;">'),0>=
this.currentPage&&(this.currentPage=1),f.append(d("PagingButtonsFirst",this.getPaginEvent("FIRST"),!this.isFirstPage(),gx.getMessage("GXM_first"))),f.append(d("PagingButtonsPrevious",this.getPaginEvent("PREV"),!this.isFirstPage(),gx.getMessage("GXM_previous"))),f.append(d("PagingButtonsNext",this.getPaginEvent("NEXT"),!this.isLastPage(),gx.getMessage("GXM_next"))),f.append(d("PagingButtonsLast",this.getPaginEvent("LAST"),!this.isLastPage(),gx.getMessage("GXM_last"))),f.append("</div>");this.isGxTrn()&&
!this.gxHasAddlines&&"DSP"!=this.parentGxObject.Gx_mode&&f.append(b("["+this.gxNewRowText+"]",this.gridObject()+".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);"));f.append("</td></tr>");return f.toString()};this.isLastPage=function(){return"0"!=this.eof};this.isFirstPage=function(){return"0"==(gx.lang.emptyObject(this.firstRecordOnPage)?"0":this.firstRecordOnPage)};this.getPaginEvent=function(a){var b=this.gxGridName.toUpperCase()+"PAGING";
return"javascript:gx.fn.setHidden('"+this.gxCmpContext+b+"','"+a+"');gx.evt.execEvt('"+this.gxCmpContext+"E"+b+".', gx.evt.dummyCtrl);"};this.getWebImageTag=function(a){return'<img border="0" src="/'+this.basePath+this.imgsDir+a.toString()+'"/>'};var p=0;this.handleLabel=function(a){if(a.src){var b="img"+p;p++;return"<img name='"+b+"' border='0' src='"+a.src+"'>"}return a};this.sort=function(a,b){if(a.table.isGxTrn()){if(!a.gxExists()&&!b.gxExists()&&!a.gxIsMod()&&!b.gxIsMod())return 0;if(!a.gxExists()&&
b.gxExists()||!a.gxIsMod()&&b.gxIsMod())return 1;if(a.gxExists()&&!b.gxExists()||a.gxIsMod()&&!b.gxIsMod())return-1}var d=a.table,g=d.getColumnByIndex(d.sortColumn),f,k;f=a.values[d.sortColumn];k=b.values[d.sortColumn];gx.lang.instanceOf(f,Array)||(f=[f]);gx.lang.instanceOf(k,Array)||(k=[k]);switch(g.type){case gx.types.numeric:g=function(a){a=gx.num.parseFloat(a,gx.thousandSeparator,gx.decimalPoint);isNaN(a)&&(a=0);return a};break;case gx.types.date:case gx.types.dateTime:g=function(a){try{a=(new gx.date.gxdate(a)).Value}catch(b){gx.dbg.logEx(b,
"JSTable.js","sort")}return a.valueOf()};break;case gx.types.bool:g=function(a){return gx.lang.booleanValue(a)?1:0};break;default:g=function(a){return(""+a).replace(/<[^\>]*\>/g,"").toUpperCase()}}for(var l=Math.max(f.length,k.length),j=0,c=0;0===j&&c<l;c++){var e=f[c];null==e&&(j=-1);var o=k[c];null==o&&(j=1);0===j&&(e=g(e),o=g(o),j=e==o?0:e>o?1:-1);0!==j&&(j*=d.ascSort?1:-1)}return j}};
gx.grid.column=function(q,t,p,a,b){this.table=null;this.index=-1;this.title=q||"";this.type="undefined"!=typeof t?t:gx.types.character;this.width=p||"";this.align=a||"left";this.valign=b||"middle";this.htmlName=null;this.sortable=this.enabled=this.visible=!0;this.rowspan=this.colspan=1;this.gxAttId=this.gxId=-1;this.gxWidthUnit=this.gxAttName="";this.gxUnChecked=this.gxChecked=void 0;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?-1!=this.gxAttName.indexOf("GxRemove")||
-1!=this.gxAttName.indexOf("nRcdDeleted"):!1}};
gx.grid.row=function(q,t,p,a){this.table=null;this.id=q;this.gxParentRowId=a||"";this.gxId=p+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=t.Props||[];this.gxRenderProps=t.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.gxIsMod=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+
this.gxId);return null!=a?0!==Number(a):!1};this.gxDeleted=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.setDeleted=function(a){gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,a?1:0)}};
